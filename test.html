<script type="text/javascript">
    var after = function(times, func) {
        if (times <= 0) {
            return func();
        }
        return function() {
            if (--times < 1) {
                return func.apply(this.args);
            };
        };
    };


    (function() {
        after(1, function() {
            alert('success');
        })
    })();
</script>